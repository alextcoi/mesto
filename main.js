(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o){var i=e.data,c=e.handleCardClick,u=e.handleRemoveClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=i.name,this._link=i.link,this._likes=i.likes,this._owner=i.owner,this._id=i._id,this._myId=r,this._cardSelector=n,this._handleCardClick=c,this._handleRemoveClick=u,this.api=o}var n,r;return n=t,(r=[{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__pic").src=this._link,this._element.querySelector(".element__pic").alt=this._name,this._element.querySelector(".element__text").textContent=this._name,this._element.querySelector(".element__button-counter").textContent=this._likes.length,this._likes.some((function(t){return t._id===e._myId}))&&this._element.querySelector(".element__button").classList.add("element__button_clicked"),this._owner._id!==this._myId&&this._element.querySelector(".element__delete").remove(),this._element}},{key:"_toggleLike",value:function(e,t){var n=this;this._checkLikes()?this.api.deleteLike(t).then((function(t){n._likes=t.likes,n._element.querySelector(".element__button-counter").textContent=t.likes.length,e.target.classList.remove("element__button_clicked")})).catch((function(e){console.log(e)})):this.api.putLike(t).then((function(t){n._likes=t.likes,n._element.querySelector(".element__button-counter").textContent=t.likes.length,e.target.classList.add("element__button_clicked")})).catch((function(e){console.log(e)}))}},{key:"_checkLikes",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._myId}))}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__button").addEventListener("click",(function(t){return e._toggleLike(t,e._id)})),this._element.querySelector(".element__delete").addEventListener("click",(function(){return e._handleRemoveClick()})),this._element.querySelector(".element__pic").addEventListener("click",(function(){return e._handleCardClick()}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._clickOutside=this._clickOutside.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this.close=this.close.bind(this),this._closeButton=this._popup.querySelector(".popup__close-button")}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_clickOutside",value:function(e){e.target.classList.contains("popup_opened")&&this.close()}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._clickOutside),this._closeButton.addEventListener("click",this.close)}}])&&n(t.prototype,r),e}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,e);var t,n,r,o,f=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(r);if(o){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function p(e,t){var n,r=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(n=f.call(this,e))._form=n._popup.querySelector(".popup__form"),n._handleFormSubmit=r,n._saveButton=n._popup.querySelector(".popup__button"),n.close=n.close.bind(s(n)),n._formSubmitter=n._formSubmitter.bind(s(n)),n}return t=p,(n=[{key:"renderLoading",value:function(e){this._saveButton.textContent=e?"Сохранение...":"Сохранить"}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){c(l(p.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._formSubmitter)}},{key:"_formSubmitter",value:function(e){e.preventDefault(),this._handleFormSubmit(this._getInputValues())}},{key:"close",value:function(){this._form.reset(),c(l(p.prototype),"close",this).call(this)}}])&&i(t.prototype,n),p}(r);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=i.call(this,e))._imageName=r._popup.querySelector(t),r._image=r._popup.querySelector(n),r}return t=c,(n=[{key:"open",value:function(e,t){this._imageName.textContent=e,this._image.src=t,this._image.alt=e,_(m(c.prototype),"open",this).call(this)}}])&&h(t.prototype,n),c}(r);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&b(t.prototype,n),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.userName,r=t.userTitle,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userTitle=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,profession:this._userTitle.textContent}}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userTitle.textContent=e.about,this._userAvatar.src=e.avatar,this._userAvatar.alt=e.name}}])&&g(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=n,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;Array.from(document.querySelectorAll(this._formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),e._setEventListeners(t)}))}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._inputSelector)),r=e.querySelector(this._submitButtonSelector);e.addEventListener("reset",(function(){n.forEach((function(o){t._hideInputError(e,o),t._toggleButtonState(n,r)}))})),this._toggleButtonState(n,r),n.forEach((function(o){(""===o.value||o.validity.valid)&&t._hideInputError(e,o),o.addEventListener("input",(function(){t._checkInputValidity(e,o),t._toggleButtonState(n,r)}))}))}},{key:"_checkInputValidity",value:function(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t,t.validationMessage)}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.disabled=!0,t.classList.add(this._inactiveButtonClass)):(t.disabled=!1,t.classList.remove(this._inactiveButtonClass))}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),r.textContent=n,r.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),n.classList.remove(this._errorClass),n.textContent=""}}])&&E(t.prototype,n),e}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function c(e,t){var n,r=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._form=n._popup.querySelector(".popup__form"),n._saveButton=n._popup.querySelector(".popup__button"),n._handleFormSubmit=r,n.close=n.close.bind(q(n)),n._formSubmitter=n._formSubmitter.bind(q(n)),n}return t=c,(n=[{key:"renderLoading",value:function(e){this._saveButton.textContent=e?"Удаление...":"Удалить"}},{key:"setEventListeners",value:function(){O(R(c.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._formSubmitter)}},{key:"_formSubmitter",value:function(e){e.preventDefault(),this._handleFormSubmit(this._cardId)}},{key:"open",value:function(e,t){O(R(c.prototype),"open",this).call(this),this._element=e._element,this._cardId=t}},{key:"deleteCard",value:function(){this._element.remove()}}])&&L(t.prototype,n),c}(r);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x,B=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._password=n,this._baseUrl=t}var t,n;return t=e,(n=[{key:"getProfile",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{authorization:this._password}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"getCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:{authorization:this._password}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"putLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._password}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._password}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"patchProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._password,"Content-Type":"application/json"},body:JSON.stringify({name:e.form_name,about:e.form_profession})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"patchProfilePic",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._password,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"postPicture",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._password,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deletePicture",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:"f0a6b51b-b6dd-4422-9c6f-1c6d9f1c16da"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}}])&&T(t.prototype,n),e}(),U=document.querySelector(".profile__edit-button"),A=document.querySelector("#form-name"),D=document.querySelector("#form-profession"),N=document.querySelector(".profile__add-button"),V=document.querySelector(".profile__avatar-container"),F=document.querySelector(".profile__avatar"),z=(document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),{formSelector:".form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),J=new v(".popup_opened-card",".opened-card__name",".opened-card__pic");J.setEventListeners();var G=new S({userName:".profile__title",userTitle:".profile__subtitle",userAvatar:".profile__avatar"}),H=new B("https://mesto.nomoreparties.co/v1/cohort-20","f0a6b51b-b6dd-4422-9c6f-1c6d9f1c16da"),M=new I(".popup_delete-card",{handleFormSubmit:function(e){M.renderLoading(!0),H.deletePicture(e).then((function(){M.deleteCard(),M.close()})).catch((function(e){console.log(e)})).finally((function(){return M.renderLoading(!1)}))}});M.setEventListeners(),H.getProfile().then((function(e){G.setUserInfo(e),x=e._id})).catch((function(e){console.log(e)}));var K=new k({renderer:function(e){var n=new t({data:e,handleCardClick:function(){J.open(e.name,e.link)},handleRemoveClick:function(){M.open(n,e._id)}},".default-card",x,H),r=n.generateCard();K.addItem(r)}},".elements__container");H.getCards().then((function(e){var t=e.reverse();K.renderItems(t)})).catch((function(e){console.log(e)}));var Q=new f(".popup_card",{handleFormSubmit:function(e){Q.renderLoading(!0),H.postPicture(e).then((function(e){return K.renderItems([e])})).then((function(){return Q.close()})).catch((function(e){console.log(e)})).finally((function(){return Q.renderLoading(!1)}))}});Q.setEventListeners();var W=new f(".popup_profile",{handleFormSubmit:function(e){W.renderLoading(!0),H.patchProfile(e).then((function(e){return G.setUserInfo(e)})).catch((function(e){console.log(e)})).finally((function(){return W.renderLoading(!1)})),W.close()}});W.setEventListeners();var X=new f(".popup_profile-picture",{handleFormSubmit:function(e){X.renderLoading(!0),F.src=e.avatar,H.patchProfilePic(e).catch((function(e){return console.log(e)})).finally((function(){return X.renderLoading(!1)})),X.close()}});X.setEventListeners(),new w(z,".form_card").enableValidation(),new w(z,".form_profile-pic").enableValidation(),new w(z,".form_profile").enableValidation(),N.addEventListener("click",(function(){Q.open()})),V.addEventListener("click",(function(){X.open()})),U.addEventListener("click",(function(){W.open();var e=G.getUserInfo();A.setAttribute("value",e.name),D.setAttribute("value",e.profession)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvUG9wdXBEZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJteUlkIiwiYXBpIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVJlbW92ZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJfaWQiLCJfbXlJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVJlbW92ZUNsaWNrIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJzb21lIiwiaXRlbSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImV2dCIsImNhcmRJZCIsIl9jaGVja0xpa2VzIiwiZGVsZXRlTGlrZSIsInRoZW4iLCJyZXMiLCJ0YXJnZXQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwdXRMaWtlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RvZ2dsZUxpa2UiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfY2xpY2tPdXRzaWRlIiwiYmluZCIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwiX2Nsb3NlQnV0dG9uIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3NhdmVCdXR0b24iLCJfZm9ybVN1Ym1pdHRlciIsImlzTG9hZGluZyIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm1WYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsImltYWdlTmFtZSIsImltYWdlIiwiX2ltYWdlTmFtZSIsIl9pbWFnZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwicHJlcGVuZCIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyVGl0bGUiLCJ1c2VyQXZhdGFyIiwiX3VzZXJOYW1lIiwiX3VzZXJUaXRsZSIsIl91c2VyQXZhdGFyIiwicHJvZmVzc2lvbiIsImFib3V0IiwiYXZhdGFyIiwiRm9ybVZhbGlkYXRvciIsImZvcm0iLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiUG9wdXBEZWxldGUiLCJfY2FyZElkIiwiY2FyZCIsInVzZXJJZCIsIkFwaSIsImJhc2VVcmwiLCJwYXNzd29yZCIsIl9wYXNzd29yZCIsIl9iYXNlVXJsIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1fbmFtZSIsImZvcm1fcHJvZmVzc2lvbiIsImVkaXRCdXR0b24iLCJmb3JtTmFtZSIsImZvcm1Qcm9mZXNzaW9uIiwiY2FyZEZvcm1PcGVuIiwiZWRpdFBpY0J1dHRvbiIsInVzZXJQaWMiLCJ2YWxpZGF0ZVBhcmFtZXRlcnMiLCJmb3JtU2VsZWN0b3IiLCJwb3B1cEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjdXJyZW50UHJvZmlsZSIsInBvcHVwRGVsZXRlRm9ybSIsInJlbmRlckxvYWRpbmciLCJkZWxldGVQaWN0dXJlIiwiZGVsZXRlQ2FyZCIsImZpbmFsbHkiLCJnZXRQcm9maWxlIiwicmVzdWx0Iiwic2V0VXNlckluZm8iLCJpbml0aWFsQ2FyZExpc3QiLCJvcGVuIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwiZ2V0Q2FyZHMiLCJyZXZlcnNlIiwicmVuZGVySXRlbXMiLCJwb3B1cENhcmRGb3JtIiwicG9zdFBpY3R1cmUiLCJwb3B1cFByb2ZpbGVGb3JtIiwicGF0Y2hQcm9maWxlIiwicG9wdXBQaWNGb3JtIiwicGF0Y2hQcm9maWxlUGljIiwiZW5hYmxlVmFsaWRhdGlvbiIsInVzZXIiLCJnZXRVc2VySW5mbyIsInNldEF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6InlMQUFPLElBQU1BLEVBQWIsV0FDSSxhQUF3REMsRUFBY0MsRUFBTUMsR0FBSyxJQUFwRUMsRUFBb0UsRUFBcEVBLEtBQU1DLEVBQThELEVBQTlEQSxnQkFBaUJDLEVBQTZDLEVBQTdDQSxtQiw0RkFBNkMsU0FDN0VDLEtBQUtDLE1BQVFKLEVBQUtLLEtBQ2xCRixLQUFLRyxNQUFRTixFQUFLTyxLQUNsQkosS0FBS0ssT0FBU1IsRUFBS1MsTUFDbkJOLEtBQUtPLE9BQVNWLEVBQUtXLE1BQ25CUixLQUFLUyxJQUFNWixFQUFLWSxJQUNoQlQsS0FBS1UsTUFBUWYsRUFDYkssS0FBS1csY0FBZ0JqQixFQUNyQk0sS0FBS1ksaUJBQW1CZCxFQUN4QkUsS0FBS2EsbUJBQXFCZCxFQUMxQkMsS0FBS0osSUFBTUEsRSxRQVhuQixPLEVBQUEsRyxFQUFBLDJCQWNJLFdBQWUsV0FlWCxPQWRBSSxLQUFLYyxTQUFXZCxLQUFLZSxlQUNyQmYsS0FBS2dCLHFCQUNMaEIsS0FBS2MsU0FBU0csY0FBYyxpQkFBaUJDLElBQU1sQixLQUFLRyxNQUN4REgsS0FBS2MsU0FBU0csY0FBYyxpQkFBaUJFLElBQU1uQixLQUFLQyxNQUN4REQsS0FBS2MsU0FBU0csY0FBYyxrQkFBa0JHLFlBQWNwQixLQUFLQyxNQUNqRUQsS0FBS2MsU0FBU0csY0FBYyw0QkFBNEJHLFlBQWNwQixLQUFLSyxPQUFPZ0IsT0FDOUVyQixLQUFLSyxPQUFPaUIsTUFBSyxTQUFBQyxHQUFJLE9BQUlBLEVBQUtkLE1BQVEsRUFBS0MsVUFDM0NWLEtBQUtjLFNBQVNHLGNBQWMsb0JBQW9CTyxVQUFVQyxJQUFJLDJCQUc5RHpCLEtB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Q0FBQ0MsaUJBQWtCLFNBQUNsQyxHQUNqRjRKLEVBQWFuQixlQUFjLEdBQzNCUCxFQUFRdkksSUFBTUssRUFBS3NFLE9BQ25CakcsRUFBSXdMLGdCQUFnQjdKLEdBQ2ZXLE9BQU0sU0FBQ0MsR0FBRCxPQUFTQyxRQUFRQyxJQUFJRixNQUMzQmdJLFNBQVEsa0JBQU1nQixFQUFhbkIsZUFBYyxNQUM5Q21CLEVBQWFoSSxXQUVqQmdJLEVBQWF0QixvQkFFYSxJQUFJL0QsRUFBYzRELEVBQW9CLGNBQzlDMkIsbUJBQ08sSUFBSXZGLEVBQWM0RCxFQUFvQixxQkFDOUMyQixtQkFDWSxJQUFJdkYsRUFBYzRELEVBQW9CLGlCQUM5QzJCLG1CQUVyQjlCLEVBQWE1RyxpQkFBaUIsU0FBUyxXQUFPb0ksRUFBY1AsVUFHNURoQixFQUFjN0csaUJBQWlCLFNBQVMsV0FBT3dJLEVBQWFYLFVBRzVEcEIsRUFBV3pHLGlCQUFpQixTQUFTLFdBQ2pDc0ksRUFBaUJULE9BQ2pCLElBQU1jLEVBQU94QixFQUFleUIsY0FDNUJsQyxFQUFTbUMsYUFBYSxRQUFTRixFQUFLcEwsTUFDcENvSixFQUFla0MsYUFBYSxRQUFTRixFQUFLM0YsZ0IiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3Rvcih7ZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVSZW1vdmVDbGlja30sIGNhcmRTZWxlY3RvciwgbXlJZCwgYXBpKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICAgICAgdGhpcy5fb3duZXIgPSBkYXRhLm93bmVyO1xuICAgICAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgICAgICB0aGlzLl9teUlkID0gbXlJZDtcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNsaWNrID0gaGFuZGxlUmVtb3ZlQ2xpY2s7XG4gICAgICAgIHRoaXMuYXBpID0gYXBpO1xuICAgIH0vL9C+0L/RgNC10LTQtdC70Y/QtdC8INC/0LDRgNCw0LzQtdGC0YDRiyDQutCw0YDRgtC+0YfQutC4XG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waWMnKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waWMnKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190ZXh0JykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24tY291bnRlcicpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fbGlrZXMuc29tZShpdGVtID0+IGl0ZW0uX2lkID09PSB0aGlzLl9teUlkKSkge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnV0dG9uJykuY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fYnV0dG9uX2NsaWNrZWQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9vd25lci5faWQgIT09IHRoaXMuX215SWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH0vL9GB0L7Qt9C00LDQtdC8INC60LDRgNGC0L7Rh9C60YNcblxuICAgIF90b2dnbGVMaWtlKGV2dCwgY2FyZElkKSB7XG4gICAgICAgIGlmICh0aGlzLl9jaGVja0xpa2VzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYXBpLmRlbGV0ZUxpa2UoY2FyZElkKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlrZXMgPSByZXMubGlrZXM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J1dHRvbi1jb3VudGVyJykudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX2J1dHRvbl9jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwaS5wdXRMaWtlKGNhcmRJZClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VzID0gcmVzLmxpa2VzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24tY291bnRlcicpLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19idXR0b25fY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NoZWNrTGlrZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5faWQgPT09IHRoaXMuX215SWRcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfS8v0LfQsNCx0LjRgNCw0LXQvCDRiNCw0LHQu9C+0L0g0LjQtyDRgNCw0LfQvNC10YLQutC4XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4gdGhpcy5fdG9nZ2xlTGlrZShldnQsIHRoaXMuX2lkKSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlUmVtb3ZlQ2xpY2soKSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3BpYycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKCkpO1xuICAgIH0vL9C90LDQstC10YjQuNCy0LDQtdC8INC+0YHQvdC+0LLQvdGL0LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvdCwINC60LDRgNGC0L7Rh9C60YMgLSDQu9Cw0LnQuiwg0YPQtNCw0LvQtdC90LjQtSwg0L7RgtC60YDRi9GC0LjQtSDQutCw0YDRgtC40L3QutC4XG5cbiAgICAvL293bmVyIGlkOiA5YzkyYWY3YWM2NTU0N2VhOGVhNWFhZDRcbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgIHRoaXMuX2NsaWNrT3V0c2lkZSA9IHRoaXMuX2NsaWNrT3V0c2lkZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7Ly/RgdC70YPRiNCw0LXQvCDQvdCw0LbQsNGC0LjQtSBlc2Mg0L3QsCDQvtGC0LrRgNGL0YLRi9GFINC/0L7Qv9Cw0L/QsNGFXG4gICAgfS8v0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0L7QslxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTsvL9GD0LHQuNGA0LDQtdC8INGB0LvRg9GI0LDRgtC10LvQuFxuICAgIH0vL9C30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9C+0LJcblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH0vL9C30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC/0YDQuCDQvdCw0LbQsNGC0LjQuCBlc2NcblxuICAgIF9jbGlja091dHNpZGUoZXZ0KSB7XG4gICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9Ly/Qt9Cw0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQv9GA0Lgg0LrQu9C40LrQtSDQvdCwINC+0LLQtdGA0LvQtdC5XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja091dHNpZGUpOy8v0YHQu9GD0YjQsNC10Lwg0LrQu9C40Log0L3QsCDQvtCy0LXRgNC70Y3QuVxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UpO1xuICAgIH1cbn0vL9GA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQutC70LDRgdGBINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L/QvtC/0LDQv9Cw0LzQuCIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHtoYW5kbGVGb3JtU3VibWl0fSkge1xuICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICAgICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXR0ZXIgPSB0aGlzLl9mb3JtU3VibWl0dGVyLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCc7XG4gICAgICB9XG4gICAgfS8v0LDQvdC40LzQsNGG0LjRjyDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLXG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX2Zvcm1TdWJtaXR0ZXIpO1xuICAgIH1cblxuICAgIF9mb3JtU3VibWl0dGVyIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxufS8v0LrQu9Cw0YHRgSDQtNC70Y8g0YTQvtGA0LwiLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGltYWdlTmFtZSwgaW1hZ2UpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZU5hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKGltYWdlTmFtZSk7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKGltYWdlKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX2ltYWdlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufS8v0YDQsNCx0L7RgtCwINGBINC+0YLQutGA0YvRgtC40LXQvCDQutCw0YDRgtC40L3QutC4IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IFxuICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuICBcbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgICB9XG4gIFxuICAgIGFkZEl0ZW0oaXRlbSkge1xuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7dXNlck5hbWUsIHVzZXJUaXRsZSwgdXNlckF2YXRhcn0pIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcbiAgICAgICAgdGhpcy5fdXNlclRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyVGl0bGUpO1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyKTtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xuICAgICAgICBjb25zdCBwcm9mZXNzaW9uID0gdGhpcy5fdXNlclRpdGxlLnRleHRDb250ZW50O1xuICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHtuYW1lLCBwcm9mZXNzaW9ufTtcbiAgICAgICAgcmV0dXJuIHVzZXJEYXRhO1xuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJUaXRsZS50ZXh0Q29udGVudCA9IGl0ZW0uYWJvdXQ7XG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gaXRlbS5hdmF0YXI7XG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIuYWx0ID0gaXRlbS5uYW1lO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgZm9ybSkge1xuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtO1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gZGF0YS5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGRhdGEuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBkYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGRhdGEuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gZGF0YS5lcnJvckNsYXNzO1xuICAgIH0vL9C+0L/RgNC10LTQtdC70Y/QtdC8INC/0LDRgNCw0LzQtdGC0YDRiyDQstCw0LvQuNC00LDRhtC40LhcblxuICAgIGVuYWJsZVZhbGlkYXRpb24gKCkge1xuICAgICAgICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtU2VsZWN0b3IpKTtcbiAgICAgICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfTsvL9C/0YDQvtGF0L7QtNC40Lwg0L/QviDRhNC+0YDQvNCw0Lwg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuFxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzIChmb3JtRWxlbWVudCkge1xuICAgICAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuICAgICAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5wdXRFbGVtZW50LnZhbHVlID09PSAnJyB8fCBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9Oy8v0L/RgNC+0YXQvtC00LjQvCDQv9C+INC40L3Qv9GD0YLQsNC8INGE0L7RgNC80YssINC/0YDQvtCy0LXRgNGP0LXQvCDQuNGFINC90LAg0LLQsNC70LjQtNC90L7RgdGC0Ywg0LTQviDQstC90LXRgdC10L3QuNGPINC00LDQvdC90YvRhSDQuCDQstC+INCy0YDQtdC80Y8g0LLQvdC10YHQtdC90LjRj1xuXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9Oy8v0LXRgdGC0Ywg0L7RiNC40LHQutC4INCyINC40L3Qv9GD0YLQsNGFINC40LvQuCDQvdC10YJcblxuXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlIChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIH1cbiAgICB9Oy8v0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0LTQu9GPINCw0LrRgtC40LLQsNGG0LjQuCDQutC90L7Qv9C60Lgg0L/RgNC4INCy0LDQu9C40LTQvdC+0YHRgtC4INC00LDQvdC90YvRhVxuICAgIFxuICAgIF9oYXNJbnZhbGlkSW5wdXQgKGlucHV0TGlzdCkge1xuICAgICAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KVxuICAgIH07Ly/QstC+0LfQstGA0LDRidCw0LXQvCDQv9GA0LDQstC00LAv0L3QtdC/0YDQsNCy0LTQsCDQv9GA0Lgg0LLQsNC70LjQtNC90L7RgdGC0Lgg0LjQvdC/0YPRgtCwINCyINGE0L7RgNC80LVcbiAgICBcbiAgICBfc2hvd0lucHV0RXJyb3IgKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfTsvL9C10YHQu9C4INC00LDQvdC90YvQtSDQvdC1INCy0LDQu9C40LTQvdGLIC0g0LLRi9C00LDQtdC8INC+0YjQuNCx0LrRg1xuICAgICAgXG4gICAgX2hpZGVJbnB1dEVycm9yIChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIH07Ly/QtdGB0LvQuCDQtNCw0L3QvdGL0LUg0LLQsNC70LjQtNC90YsgLSDRgdC60YDRi9Cy0LDQtdC8INC+0YjQuNCx0LrRg1xufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7aGFuZGxlRm9ybVN1Ym1pdH0pIHtcbiAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLl9mb3JtU3VibWl0dGVyID0gdGhpcy5fZm9ybVN1Ym1pdHRlci5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSAn0KPQtNCw0LvQtdC90LjQtS4uLic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gJ9Cj0LTQsNC70LjRgtGMJztcbiAgICAgIH1cbiAgICB9Ly/QsNC90LjQvNCw0YbQuNGPINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0YtcblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fZm9ybVN1Ym1pdHRlcik7XG4gICAgfVxuXG4gICAgX2Zvcm1TdWJtaXR0ZXIgKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2NhcmRJZCk7XG4gICAgfVxuXG4gICAgb3BlbihjYXJkLCBjYXJkSWQpIHtcbiAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBjYXJkLl9lbGVtZW50O1xuICAgICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xuICAgIH1cblxuICAgIGRlbGV0ZUNhcmQoKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbn0vL9C60LvQsNGB0YEg0LTQu9GPINGE0L7RgNC8IiwiZXhwb3J0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3IoYmFzZVVybCwgcGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5fcGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmxcbiAgICB9XG5cbiAgICBnZXRQcm9maWxlKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Bhc3N3b3JkLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Bhc3N3b3JkLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHB1dExpa2UoaWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9wYXNzd29yZFxuICAgICAgICAgICAgfSwgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlbGV0ZUxpa2UoaWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9wYXNzd29yZFxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHBhdGNoUHJvZmlsZShpdGVtKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0uZm9ybV9uYW1lLFxuICAgICAgICAgICAgICAgIGFib3V0OiBpdGVtLmZvcm1fcHJvZmVzc2lvblxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIHBhdGNoUHJvZmlsZVBpYyhpdGVtKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGl0ZW0uYXZhdGFyXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgcG9zdFBpY3R1cmUoaXRlbSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBsaW5rOiBpdGVtLmxpbmtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cbiAgICBkZWxldGVQaWN0dXJlKGlkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ2YwYTZiNTFiLWI2ZGQtNDQyMi05YzZmLTFjNmQ5ZjFjMTZkYSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL2NhcmQuanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBQb3B1cERlbGV0ZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBEZWxldGUnO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5jb25zdCBmb3JtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLW5hbWUnKTtcbmNvbnN0IGZvcm1Qcm9mZXNzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0tcHJvZmVzc2lvbicpO1xuY29uc3QgY2FyZEZvcm1PcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmNvbnN0IGVkaXRQaWNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWNvbnRhaW5lcicpO1xuZXhwb3J0IGNvbnN0IHVzZXJQaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5leHBvcnQgY29uc3QgdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcbmV4cG9ydCBjb25zdCB1c2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3VidGl0bGUnKTtcbmxldCB1c2VySWQ7XG5cbmNvbnN0IHZhbGlkYXRlUGFyYW1ldGVycyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gICAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJ1xufTtcblxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX29wZW5lZC1jYXJkJywgJy5vcGVuZWQtY2FyZF9fbmFtZScsICcub3BlbmVkLWNhcmRfX3BpYycpOy8v0L/QvtC/0LDQvyDRgSDQutCw0YDRgtC40L3QutC+0LlcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTsvL9GB0LvRg9GI0LDQtdC8INC00LXQudGB0YLQstC40Y8g0L3QsCDQvtGC0LrRgNGL0YLQvtC5INC60LDRgNGC0LjQvdC60LVcblxuY29uc3QgY3VycmVudFByb2ZpbGUgPSBuZXcgVXNlckluZm8oe3VzZXJOYW1lOiAnLnByb2ZpbGVfX3RpdGxlJywgdXNlclRpdGxlOiAnLnByb2ZpbGVfX3N1YnRpdGxlJywgdXNlckF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInfSk7Ly/Qt9Cw0LHQuNGA0LDQtdC8INGC0LXQutGD0YnQtdC1INC40LzRjyDQuCDRgtC40YLRg9C7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjAnLCAnZjBhNmI1MWItYjZkZC00NDIyLTljNmYtMWM2ZDlmMWMxNmRhJyk7Ly/QutC70LDRgdGBINGBINCx0LDQt9C+0LLRi9C8IEFwaVxuXG5jb25zdCBwb3B1cERlbGV0ZUZvcm0gPSBuZXcgUG9wdXBEZWxldGUoJy5wb3B1cF9kZWxldGUtY2FyZCcsIHtcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoY2FyZElkKSA9PiB7XG4gICAgICAgIHBvcHVwRGVsZXRlRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgICBhcGkuZGVsZXRlUGljdHVyZShjYXJkSWQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwRGVsZXRlRm9ybS5kZWxldGVDYXJkKCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwRGVsZXRlRm9ybS5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7Y29uc29sZS5sb2coZXJyKX0pXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiBwb3B1cERlbGV0ZUZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSkpXG4gICAgfSxcbn0pOy8v0YTQvtGA0LzQsCDQtNC70Y8g0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5wb3B1cERlbGV0ZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTsvL9GB0LvRg9GI0LDQtdC8INGB0L7QsdGL0YLQuNGPINC90LAg0YTQvtGA0LzQtSDRg9C00LDQu9C10L3QuNGPXG5cbmFwaS5nZXRQcm9maWxlKClcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGN1cnJlbnRQcm9maWxlLnNldFVzZXJJbmZvKHJlc3VsdCk7XG4gICAgICAgIHVzZXJJZCA9IHJlc3VsdC5faWQ7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KTsvL9C30LDQv9GA0L7RgSDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcblxuY29uc3QgaW5pdGlhbENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe2RhdGE6IGl0ZW0sIFxuICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcG9wdXBJbWFnZS5vcGVuKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYW5kbGVSZW1vdmVDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVwRGVsZXRlRm9ybS5vcGVuKGNhcmQsIGl0ZW0uX2lkKTtcbiAgICAgICAgICAgIH0sfSwnLmRlZmF1bHQtY2FyZCcsIHVzZXJJZCwgYXBpKTtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgICBpbml0aWFsQ2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG59LCB9LCAnLmVsZW1lbnRzX19jb250YWluZXInKTsvL9GN0LrQt9C10LzQv9C70Y/RgCDRgdC10LrRhtC40Lgg0YEg0LrQsNGA0YLQvtGH0LrQsNC80LhcblxuYXBpLmdldENhcmRzKClcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gcmVzdWx0LnJldmVyc2UoKTtcbiAgICAgICAgaW5pdGlhbENhcmRMaXN0LnJlbmRlckl0ZW1zKGl0ZW1zKX0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpfSk7Ly/Qt9Cw0L/RgNC+0YEg0L3QsCDRgdC10YDQstC10YAg0LfQsCDQutCw0YDRgtC+0YfQutCw0LzQuCDQuCDRgNC10L3QtNC10YDQuNC90LNcblxuY29uc3QgcG9wdXBDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfY2FyZCcsIHtoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgIHBvcHVwQ2FyZEZvcm0ucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICBhcGkucG9zdFBpY3R1cmUoaXRlbSlcbiAgICAgICAgLnRoZW4oaXRlbSA9PiBpbml0aWFsQ2FyZExpc3QucmVuZGVySXRlbXMoW2l0ZW1dKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gcG9wdXBDYXJkRm9ybS5jbG9zZSgpKVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBwb3B1cENhcmRGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpKTtcbn0sfSk7Ly/RgdC+0LfQtNCw0L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCDQv9GA0Lgg0YHQsNCx0LzQuNGC0LUg0LIg0YTQvtGA0LzQtVxucG9wdXBDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpOy8v0YHQu9GD0YjQsNC10Lwg0YHQvtCx0YvRgtC40Y8g0L3QsCDRhNC+0YDQvNC1INGBINC00L7QsdCw0LLQu9C10L3QuNC10Lwg0LrQsNGA0YLQvtGH0LrQuFxuXG5jb25zdCBwb3B1cFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9wcm9maWxlJywge2hhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgcG9wdXBQcm9maWxlRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgIGFwaS5wYXRjaFByb2ZpbGUoaXRlbSlcbiAgICAgICAgLnRoZW4oKGl0ZW0pID0+IGN1cnJlbnRQcm9maWxlLnNldFVzZXJJbmZvKGl0ZW0pKVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBwb3B1cFByb2ZpbGVGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpKTtcbiAgICBwb3B1cFByb2ZpbGVGb3JtLmNsb3NlKCk7XG59LH0pOy8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRjyDQv9GA0Lgg0YHQsNCx0LzQuNGC0LUg0LIg0YTQvtGA0LzQtVxucG9wdXBQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpOy8v0YHQu9GD0YjQsNC10Lwg0YHQvtCx0YvRgtC40Y8g0L3QsCDRhNC+0YDQvNC1INGBINC00LDQvdC90YvQvNC4INC/0YDQvtGE0LjQu9GPXG5cbmNvbnN0IHBvcHVwUGljRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfcHJvZmlsZS1waWN0dXJlJywge2hhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgcG9wdXBQaWNGb3JtLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgdXNlclBpYy5zcmMgPSBpdGVtLmF2YXRhcjtcbiAgICBhcGkucGF0Y2hQcm9maWxlUGljKGl0ZW0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgICAgICAuZmluYWxseSgoKSA9PiBwb3B1cFBpY0Zvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xuICAgIHBvcHVwUGljRm9ybS5jbG9zZSgpO1xufSx9KS8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQutCw0YDRgtC40L3QutC4INC/0YDQvtGE0LjQu9GPINC/0YDQuCDRgdCw0LHQvNC40YLQtSDQvdCwINGE0L7RgNC80LVcbnBvcHVwUGljRm9ybS5zZXRFdmVudExpc3RlbmVycygpOy8v0YHQu9GD0YjQsNC10Lwg0YHQvtCx0YvRgtC40Y8g0L3QsCDRhNC+0YDQvNC1INGBINCw0LLQsNGC0LDRgNC+0LxcblxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZVBhcmFtZXRlcnMsICcuZm9ybV9jYXJkJyk7XG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCBwaWNGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGVQYXJhbWV0ZXJzLCAnLmZvcm1fcHJvZmlsZS1waWMnKTtcbnBpY0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZVBhcmFtZXRlcnMsICcuZm9ybV9wcm9maWxlJyk7XG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNhcmRGb3JtT3Blbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtwb3B1cENhcmRGb3JtLm9wZW4oKTt9KTtcbi8v0YLRgNC40LPQs9C10YAg0L7RgtC60YDRi9GC0LjRjyDRhNC+0YDQvNGLINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lgg0Lgg0LTQvtCx0LDQstC70LXQvdC40LUg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0L3QsCDRgdCw0LHQvNC40YIg0YTQvtGA0LzRi1xuXG5lZGl0UGljQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3BvcHVwUGljRm9ybS5vcGVuKCl9KTtcbi8v0YLRgNC40LPQs9C10YAg0L3QsCDQvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LrQsNGA0YLQuNC90LrQuCDQv9GA0L7RhNC40LvRj1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHBvcHVwUHJvZmlsZUZvcm0ub3BlbigpOyAgICBcbiAgICBjb25zdCB1c2VyID0gY3VycmVudFByb2ZpbGUuZ2V0VXNlckluZm8oKTtcbiAgICBmb3JtTmFtZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdXNlci5uYW1lKTtcbiAgICBmb3JtUHJvZmVzc2lvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdXNlci5wcm9mZXNzaW9uKTtcbn0pOy8v0YLRgNC40LPQs9C10YAg0L3QsCDQvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cblxuLy9odHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGdcbi8vaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGciXSwic291cmNlUm9vdCI6IiJ9